language: java

dist: xenial

services:
  - docker

addons:
  sonarcloud:
    organization: "vancharlotte"
    token:
      secure : "travis encrypt 791155cb746dcaed7e8c2b389f083f3c8718e859"


before_script:
  - cd docker/dev
  - docker-compose up -d
  - cd ../..

script:
  - mvn verify -f src sonar:sonar -P test-business -Dsonar.login=791155cb746dcaed7e8c2b389f083f3c8718e859
  - mvn verify -f src sonar:sonar -P test-consumer -Dsonar.login=791155cb746dcaed7e8c2b389f083f3c8718e859